<div id="empruntsPage">
  <h1 class="mb-4">
    <i class="fas fa-exchange-alt me-2"></i>
    Gestion des emprunts
  </h1>
  
  <div class="row">
    <div class="col-12 mb-4">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <span><i class="fas fa-list me-2"></i> Liste des emprunts</span>
          <button type="button" class="btn btn-success btn-sm" id="btnNouvelEmprunt">
            <i class="fas fa-plus me-1"></i> Nouvel emprunt
          </button>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover" id="empruntsTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nom Manipulation</th>
                  <th>Dates (Départ - Retour)</th>
                  <th>Statut</th>
                  <th>Emprunteur</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Sera rempli dynamiquement -->
                <tr>
                  <td colspan="6" class="text-center">Chargement des données...</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="alert alert-info mt-3">
            <i class="fas fa-info-circle me-2"></i>
            Cette page est en cours de développement. Pour l'instant, elle affiche une liste d'emprunts fictifs.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Fonction d'initialisation de la page Emprunts
  function initializeEmpruntsPage() {
    console.log('Initialisation de la page Emprunts - Version de test');
    
    // Afficher des données fictives pour tester l'affichage
    showFakeEmpruntsData();
    
    // Configurer le bouton "Nouvel emprunt"
    document.getElementById('btnNouvelEmprunt').addEventListener('click', function() {
      alert('Fonctionnalité "Nouvel emprunt" à implémenter prochainement');
    });
  }
  
  // Fonction pour afficher des données d'emprunt fictives à des fins de test
  function showFakeEmpruntsData() {
    const fakeEmprunts = [
      {
        ID: "EMP-001",
        "Nom Manipulation": "Animation Astronomie",
        "Date départ": "01/03/2025",
        "Date retour": "15/03/2025",
        Statut: "Pas prêt",
        Emprunteur: "Marie Dupont"
      },
      {
        ID: "EMP-002",
        "Nom Manipulation": "Atelier Robotique",
        "Date départ": "10/03/2025",
        "Date retour": "20/03/2025",
        Statut: "Prêt",
        Emprunteur: "Jean Martin"
      },
      {
        ID: "EMP-003",
        "Nom Manipulation": "Exposition Science",
        "Date départ": "15/02/2025",
        "Date retour": "01/03/2025",
        Statut: "Parti",
        Emprunteur: "Sophie Bernard"
      }
    ];
    
    // Remplir le tableau avec les données fictives
    const tbody = document.querySelector('#empruntsTable tbody');
    tbody.innerHTML = '';
    
    fakeEmprunts.forEach(emprunt => {
      const row = document.createElement('tr');
      
      // Ajouter une classe selon le statut
      if (emprunt.Statut === "Pas prêt") {
        row.classList.add('table-warning');
      } else if (emprunt.Statut === "Parti") {
        row.classList.add('table-info');
      }
      
      row.innerHTML = `
        <td>${emprunt.ID}</td>
        <td>${emprunt["Nom Manipulation"]}</td>
        <td>${emprunt["Date départ"]} - ${emprunt["Date retour"]}</td>
        <td><span class="badge ${getBadgeClass(emprunt.Statut)}">${emprunt.Statut}</span></td>
        <td>${emprunt.Emprunteur}</td>
        <td>
          <button class="btn btn-sm btn-outline-primary me-1">
            <i class="fas fa-eye"></i>
          </button>
          <button class="btn btn-sm btn-outline-secondary">
            <i class="fas fa-edit"></i>
          </button>
        </td>
      `;
      tbody.appendChild(row);
    });
  }
  
  // Fonction pour obtenir la classe de badge selon le statut
  function getBadgeClass(status) {
    switch(status) {
      case "Pas prêt": return "bg-warning text-dark";
      case "Prêt": return "bg-success";
      case "Parti": return "bg-primary";
      case "Revenu": return "bg-info text-dark";
      case "Inventorié": return "bg-secondary";
      default: return "bg-secondary";
    }
  }
</script>
